<!DOCTYPE html>
<html lang="zh-HK">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è§€é³¥å°åµæ¢</title>
    <!-- å¼•å…¥ Tailwind CSS ä»¥å¿«é€Ÿæ’ç‰ˆå’Œç¾åŒ– -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ Noto Sans TC å­—é«”ä½¿ä¸­æ–‡é¡¯ç¤ºæ›´ç¾è§€ -->
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;700;900&display=swap" rel="stylesheet">
    
    <style>
        body {
            font-family: 'Noto Sans TC', sans-serif;
            background-color: #333; /* å¤–åœèƒŒæ™¯è‰²ï¼Œçªå‡º4:3çš„éŠæˆ²ç•«é¢ */
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        /* éŠæˆ²ç•«é¢å®¹å™¨ - å¼·åˆ¶ 4:3 æ¯”ä¾‹ */
        #game-container {
            position: relative;
            background-color: white;
            aspect-ratio: 4 / 3;
            max-width: 100vw;
            max-height: 100vh;
            width: 100%;
            height: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            overflow: hidden;
        }
        
        @media (max-aspect-ratio: 4/3) {
            #game-container {
                width: 100vw;
                height: 75vw; /* 100 * 3 / 4 */
            }
        }
        
        @media (min-aspect-ratio: 4/3) {
            #game-container {
                height: 100vh;
                width: 133.33vh; /* 100 * 4 / 3 */
            }
        }

        /* 3D ç¿»è½‰å¡ç‰Œçš„ CSS è¨­å®š */
        .perspective-1000 { perspective: 1000px; }
        .transform-style-3d { transform-style: preserve-3d; }
        .backface-hidden { backface-visibility: hidden; }
        .rotate-y-180 { transform: rotateY(180deg); }
        
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.4, 0.2, 0.2, 1);
        }
        
        /* ç•¶åŠ å…¥ flipped é¡åˆ¥æ™‚ç¿»è½‰å¡ç‰Œ */
        .card.flipped .card-inner {
            transform: rotateY(180deg);
        }

        .card-front, .card-back {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            border-radius: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        }

        /* å¡ç‰ŒèƒŒé¢ (é¡¯ç¤ºé³¥é¡è³‡è¨Š) */
        .card-back {
            background-color: white;
            display: flex;
            flex-direction: column;
            transform: rotateY(180deg);
        }
    </style>
</head>
<body>

    <!-- éŠæˆ²ä¸»å®¹å™¨ 4:3 -->
    <div id="game-container">
        
        <!-- ================= ç¬¬ 1 é ï¼šéŠæˆ²ç•«é¢ (ç²‰ç¶ è‰²åº•) ================= -->
        <div id="page-game" class="absolute inset-0 bg-[#e8f5e9] flex flex-col p-2 sm:p-4 md:p-6">
            
            <!-- æ¨™é¡Œå€ -->
            <div class="text-center mb-2 sm:mb-4 flex-shrink-0">
                <h3 class="text-sm sm:text-base md:text-lg font-bold text-gray-700 mb-1 leading-tight">2025-2026 ç§‘å­¸ç§‘ é¦™æ¸¯çœŸå…‰ä¸­å­¸é™„å±¬å°å­¸æš¨å¹¼ç¨šåœ’</h3>
                <h1 class="text-lg sm:text-xl md:text-3xl font-black text-blue-800 tracking-wide mb-1 leading-tight">ğŸ‘¦ è§€é³¥å°åµæ¢ æŠ€èƒ½è§£é–éä¸‰é—œ ğŸ‘§</h1>
                <h2 class="text-base sm:text-lg md:text-xl font-bold text-teal-700 leading-tight">ğŸ¦ æ¨¡ä»¿é³¥é³´æŠ€èƒ½è§£é– ğŸ”“</h2>
            </div>

            <!-- å¡ç‰Œå€åŸŸ -->
            <div id="cards-container" class="flex-1 w-full grid grid-cols-3 gap-2 sm:gap-4 md:gap-5 px-1 pb-2">
                <!-- å¡ç‰Œæœƒç”± JavaScript å‹•æ…‹ç”Ÿæˆ -->
            </div>
        </div>

        <!-- ================= ç¬¬ 2 é ï¼šæˆåŠŸç•«é¢ (ç²‰ç´…è‰²åº•) ================= -->
        <div id="page-success" class="absolute inset-0 bg-[#fce4ec] hidden flex-col items-center justify-center p-8 z-50">
            <div class="text-center mb-10 animate-pulse">
                <div class="text-4xl sm:text-6xl mb-6">ğŸ‰ğŸ‘ğŸŒŸ</div>
                <h1 class="text-2xl sm:text-3xl md:text-4xl font-black text-pink-600 mb-6 drop-shadow-md">è§€é³¥å°åµæ¢</h1>
                <h2 class="text-xl sm:text-2xl md:text-3xl font-bold text-pink-500 bg-white bg-opacity-70 inline-block px-8 py-4 rounded-3xl shadow-sm">æ¨¡ä»¿é³¥é³´æŠ€èƒ½è§£é–æˆåŠŸï¼</h2>
            </div>
            
            <button onclick="resetGame()" class="mt-8 px-8 py-4 bg-pink-500 hover:bg-pink-600 active:bg-pink-700 text-white text-lg sm:text-xl font-bold rounded-full shadow-lg transform transition hover:scale-105 active:scale-95 flex items-center gap-3 border-4 border-pink-300">
                ä¸‹ä¸€ä½è§€é³¥å°åµæ¢ â¡
            </button>
        </div>

    </div>

    <!-- ç”¨æ–¼æ’­æ”¾éŸ³æ•ˆçš„ Audio æ¨™ç±¤ï¼ŒåŠ å…¥ crossorigin å…è¨± Web Audio API è™•ç†è·¨ç¶²åŸŸéŸ³é » -->
    <audio id="audio-player" crossorigin="anonymous"></audio>

    <script>
        // è³‡æ–™åº«ï¼šå°‡æä¾›çš„ GitHub ç¶²å€è½‰æ›ç‚º raw ç¶²å€ä»¥ä¾›ç›´æ¥è®€å–ï¼Œä¸¦åŠ å…¥ volume boost åƒæ•¸
        const birdsData = [
            {
                name: "å°è‘µèŠ±é³³é ­é¸šéµ¡",
                img: "https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%B0%8F%E8%91%B5%E8%8A%B1%E9%B3%B3%E9%A0%AD%E9%B8%9A%E9%B5%A1.png",
                audio: "https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%B0%8F%E8%91%B5%E8%8A%B1%E9%B3%B3%E9%A0%AD%E9%B8%9A%E9%B5%A1.mp3",
                boost: 2.0 // è²éŸ³å¢å¤§100% (2å€éŸ³é‡)
            },
            {
                name: "ç é ¸æ–‘é³©",
                img: "https://raw.githubusercontent.com/koonkk0901/Game/main/%E7%8F%A0%E9%A0%B8%E6%96%91%E9%B3%A9.png",
                audio: "https://raw.githubusercontent.com/koonkk0901/Game/main/%E7%8F%A0%E9%A0%B8%E6%96%91%E9%B3%A9.mp3",
                boost: 1.0 // æ­£å¸¸éŸ³é‡
            },
            {
                name: "å™ªéµ‘",
                img: "https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%99%AA%E9%B5%91.png",
                audio: "https://raw.githubusercontent.com/koonkk0901/Game/main/%E5%99%AA%E9%B5%91.mp3",
                boost: 1.0 // æ­£å¸¸éŸ³é‡
            }
        ];

        const clapAudioUrl = "https://raw.githubusercontent.com/koonkk0901/Game/main/%E6%8B%8D%E6%89%8B.mp3";
        const audioPlayer = document.getElementById('audio-player');
        
        // Web Audio API è®Šæ•¸è¨­å®š (ç”¨æ–¼çªç ´100%éŸ³é‡é™åˆ¶)
        let audioCtx;
        let track;
        let gainNode;

        // åˆå§‹åŒ– Web Audio (éœ€è¦ä½¿ç”¨è€…é¦–æ¬¡é»æ“Šå¾Œæ‰èƒ½å•Ÿç”¨)
        function setupWebAudio() {
            if (!audioCtx) {
                const AudioContext = window.AudioContext || window.webkitAudioContext;
                audioCtx = new AudioContext();
                track = audioCtx.createMediaElementSource(audioPlayer);
                gainNode = audioCtx.createGain();
                track.connect(gainNode).connect(audioCtx.destination);
            }
            // å–šé†’è¢«ç€è¦½å™¨æš«åœçš„ audio context
            if (audioCtx.state === 'suspended') {
                audioCtx.resume();
            }
        }

        // æ´—ç‰ŒåŠŸèƒ½ (Fisher-Yates Shuffle) ç¢ºä¿æ¯æ¬¡å‡ºç¾çš„é³¥é¡é †åºä¸åŒ
        function shuffleArray(array) {
            let shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // åœæ­¢æ’­æ”¾ä¸­çš„è²éŸ³
        function stopAudio() {
            audioPlayer.pause();
            audioPlayer.currentTime = 0;
        }

        // åˆå§‹åŒ–éŠæˆ²
        function initGame() {
            // åˆ‡æ›é é¢é¡¯ç¤º
            document.getElementById('page-game').classList.remove('hidden');
            document.getElementById('page-success').classList.add('hidden');
            
            // åœæ­¢ä»»ä½•æ­£åœ¨æ’­æ”¾çš„è²éŸ³
            stopAudio();

            const container = document.getElementById('cards-container');
            container.innerHTML = ''; // æ¸…ç©ºå¡ç‰Œ
            
            // éš¨æ©Ÿæ’åˆ—ä¸‰ç¨®é³¥é¡
            const gameBirds = shuffleArray(birdsData);

            // ç”Ÿæˆå¡ç‰Œ HTML
            gameBirds.forEach((bird, index) => {
                const cardHTML = `
                    <div class="card w-full h-full perspective-1000 cursor-pointer" onclick="flipCard(this)">
                        <div class="card-inner transform-style-3d">
                            
                            <!-- å¡ç‰Œæ­£é¢ (é è¨­é¡¯ç¤ºçš„èƒŒé¢è¨­è¨ˆ) -->
                            <div class="card-front backface-hidden bg-gradient-to-br from-yellow-100 to-yellow-300 flex flex-col items-center justify-center border-4 border-yellow-400">
                                <div class="text-3xl sm:text-4xl md:text-5xl mb-4">ğŸ¦ğŸµ</div>
                                <h2 class="text-xs sm:text-sm md:text-base font-bold text-yellow-800 tracking-widest bg-white bg-opacity-60 px-4 py-2 rounded-xl">æ¨¡ä»¿é³¥é³´å¡</h2>
                            </div>

                            <!-- å¡ç‰ŒèƒŒé¢ (ç¿»é–‹å¾Œé¡¯ç¤ºé³¥é¡) -->
                            <div class="card-back backface-hidden border-4 border-teal-500 overflow-hidden">
                                <!-- é³¥é¡åœ–ç‰‡ -->
                                <div class="flex-1 w-full bg-white p-2 flex items-center justify-center">
                                    <img src="${bird.img}" alt="${bird.name}" class="max-w-full max-h-full object-contain rounded-lg" onerror="this.src='data:image/svg+xml;utf8,<svg xmlns=\\'http://www.w3.org/2000/svg\\' width=\\'100\\' height=\\'100\\'><text y=\\'50\\' font-size=\\'12\\'>åœ–ç‰‡è¼‰å…¥å¤±æ•—</text></svg>'">
                                </div>
                                
                                <!-- é³¥é¡åç¨±åŠæŒ‰éˆ•å€ (ç§»é™¤æ©«ç·šï¼Œæ–‡å­—ç¸®å°) -->
                                <div class="h-1/3 bg-teal-50 w-full flex flex-col items-center justify-center p-2">
                                    <h3 class="text-sm sm:text-base md:text-lg font-black text-teal-800 mb-2">${bird.name}</h3>
                                    
                                    <div class="flex gap-2 w-full justify-center">
                                        <!-- æç¤ºæŒ‰éˆ•ï¼ŒåŠ å…¥ boost åƒæ•¸ -->
                                        <button onclick="playHint(event, '${bird.audio}', ${bird.boost})" class="flex-1 max-w-[120px] bg-blue-500 hover:bg-blue-600 text-white font-bold py-1.5 px-2 rounded-lg shadow transition transform hover:scale-105 active:scale-95 flex items-center justify-center gap-1 text-[10px] md:text-xs">
                                            <span>ğŸ”Š æç¤º</span>
                                        </button>
                                        
                                        <!-- çµæœæŒ‰éˆ• (è©•å¯©æŒ‰) -->
                                        <button onclick="showResult(event)" class="flex-1 max-w-[120px] bg-orange-500 hover:bg-orange-600 text-white font-bold py-1.5 px-2 rounded-lg shadow transition transform hover:scale-105 active:scale-95 flex items-center justify-center gap-1 text-[10px] md:text-xs">
                                            <span>âœ… çµæœ</span>
                                        </button>
                                    </div>
                                </div>
                            </div>

                        </div>
                    </div>
                `;
                container.insertAdjacentHTML('beforeend', cardHTML);
            });
        }

        // ç¿»é–‹å¡ç‰Œ
        function flipCard(cardElement) {
            // å¦‚æœå¡ç‰Œé‚„æ²’ç¿»é–‹ï¼Œæ‰å…è¨±ç¿»é–‹
            if (!cardElement.classList.contains('flipped')) {
                cardElement.classList.add('flipped');
            }
        }

        // æ’­æ”¾é³¥è²æç¤º (é€é Web Audio æ”¾å¤§éŸ³é‡)
        function playHint(event, audioUrl, boost) {
            // é˜»æ­¢äº‹ä»¶å†’æ³¡ï¼Œé˜²æ­¢é»æ“ŠæŒ‰éˆ•æ™‚è§¸ç™¼å¡ç‰Œçš„ onclick ç¿»è½‰äº‹ä»¶
            event.stopPropagation(); 
            
            // å•Ÿç”¨ä¸¦è¨­ç½®å°æ‡‰çš„å¢ç›Šå€¼
            setupWebAudio();
            gainNode.gain.value = boost || 1.0; 
            
            audioPlayer.src = audioUrl;
            audioPlayer.play().catch(e => console.log("æ’­æ”¾éŸ³æ•ˆå¤±æ•—:", e));
        }

        // é¡¯ç¤ºæˆåŠŸç•«é¢
        function showResult(event) {
            event.stopPropagation();
            
            // åˆ‡æ›è‡³æˆåŠŸé é¢
            document.getElementById('page-game').classList.add('hidden');
            document.getElementById('page-success').classList.remove('hidden');
            document.getElementById('page-success').style.display = 'flex';
            
            // æ’­æ”¾æ‹æ‰‹è² (ç¢ºä¿éŸ³é‡æ­£å¸¸ç‚º 1.0)
            setupWebAudio();
            gainNode.gain.value = 1.0;
            audioPlayer.src = clapAudioUrl;
            audioPlayer.play().catch(e => console.log("æ’­æ”¾æ‹æ‰‹è²å¤±æ•—:", e));
        }

        // é‡ç½®éŠæˆ² (ä¸‹ä¸€ä½)
        function resetGame() {
            document.getElementById('page-success').style.display = '';
            initGame();
        }

        // é é¢è¼‰å…¥å®Œæˆå¾Œåˆå§‹åŒ–
        window.onload = initGame;

    </script>
</body>
</html>
